<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>ECharts</title>
    <!-- 引入刚刚下载的 ECharts 文件 -->
    <script src="./node_modules/echarts/dist/echarts.js"></script>
    <script src="./chartData.js"></script>
</head>

<body>
    <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
    <div id="main" style="width: 600px;height:400px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        let myChart = echarts.init(document.getElementById('main'));


        function getGraphOption(curveness) {
            let option = getOption();
            let serie = option["series"][0];
            serie.data.forEach(item => {
                item.x = item.x + Math.random() * 1000 - 500;
                item.y = item.y + Math.random() * 1000 - 500;
                item.symbolSize = 20;
            });
            serie.lineStyle = {
                color: "source",
                curveness: curveness,//线条弯曲度
                opacity: 1,//线条透明度
                width: 2,//线条宽度
            };
            serie.id = 'Score';
            serie.universalTransition = true;
            serie.animationDurationUpdate = 1000;
            return option;
        }

        let currentCurve = 0.6;
        let option = getGraphOption(currentCurve);

        setTimeout(() => {
            // currentCurve = currentCurve === 0.01 ? 0.6 : 0.01;
            // debugger;
            let data = option["series"][0].data;
            data.forEach((item) => {
                item.x = data[2].x;
                item.y = data[2].y;
            });

            myChart.setOption(option);
            // 使用 notMerge 的形式可以移除坐标轴
            // myChart.setOption(getGraphOption(currentCurve), true);
            setTimeout(() => {
                data.forEach((item) => {
                    item.x = item.x + Math.random() * 1000 - 500;
                    item.y = item.y + Math.random() * 1000 - 500;
                });
                myChart.setOption(getGraphOption(0.01));
            }, 3000);

        }, 2000);
        // debugger;
        myChart.setOption(option);

    </script>
</body>

</html>